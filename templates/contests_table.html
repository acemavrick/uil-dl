<table id="contests-table" class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 table-fixed">
    <thead class="bg-gray-50 dark:bg-gray-700">
        <tr>
            <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                <span class="sr-only">Select All</span>
            </th>
            <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer sortable" onclick="updateSort('subject')">
                <div class="flex items-center">
                    <span>Subject</span>
                    <span class="sort-icon ml-1">⇅</span>
                </div>
            </th>
            <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer sortable" onclick="updateSort('level')">
                <div class="flex items-center">
                    <span>Level</span>
                    <span class="sort-icon ml-1">⇅</span>
                </div>
            </th>
            <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer sortable" onclick="updateSort('year')">
                <div class="flex items-center">
                    <span>Year</span>
                    <span class="sort-icon ml-1">⇅</span>
                </div>
            </th>
            <th scope="col" class="px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">PDF Packet</th>
            <th scope="col" class="px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ZIP Data Files</th>
            <th scope="col" class="px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Other Files</th>
            <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer sortable" onclick="updateSort('status')">
                <div class="flex items-center">
                    <span>Status</span>
                    <span class="sort-icon ml-1">⇅</span>
                </div>
            </th>
        </tr>
    </thead>
    <tbody id="contests-table-body" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
        {% if contests %}
            {% for item in contests %}
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700" 
                data-id="{{ item.contest.id }}"
                data-subject="{{ item.contest.subject }}"
                data-level="{{ item.contest.level }}"
                data-year="{{ item.contest.year }}"
                data-status="{{ item.status }}">
                
                <!-- Row Selection Checkbox -->
                <td class="px-3 py-4 whitespace-nowrap">
                    <input type="checkbox" 
                           class="row-checkbox h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"
                           data-id="{{ item.contest.id }}" 
                           title="Select all files in this row">
                </td>
                
                <!-- Subject -->
                <td class="px-3 py-4 whitespace-nowrap text-gray-800 dark:text-gray-200">
                    {{ item.contest.subject }}
                </td>
                
                <!-- Level -->
                <td class="px-3 py-4 whitespace-nowrap text-gray-800 dark:text-gray-200">
                    {{ item.contest.level }}
                </td>
                
                <!-- Year -->
                <td class="px-3 py-4 whitespace-nowrap text-gray-800 dark:text-gray-200">
                    {{ item.contest.year }}
                </td>
                
                <!-- PDF Packet -->
                <td class="px-3 py-4 whitespace-nowrap text-center" id="pdf-cell-{{ item.contest.id }}">
                    {% if item.contest.pdf_link %}
                        <div class="flex items-center justify-center space-x-2">
                            {% if item.pdf_downloaded %}
                                <input type="checkbox"
                                       class="packet-checkbox h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"
                                       data-id="{{ item.contest.id }}"
                                       data-type="pdf"
                                       disabled
                                       checked
                                       title="Already downloaded">
                            {% else %}
                                <input type="checkbox"
                                       class="packet-checkbox h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"
                                       data-id="{{ item.contest.id }}"
                                       data-type="pdf"
                                       title="Mark packet for download">
                            {% endif %}
                        </div>
                    {% else %}
                        <span class="text-gray-800 dark:text-gray-200">N/A</span>
                    {% endif %}
                </td>
                
                <!-- ZIP Data Files -->
                <td class="px-3 py-4 whitespace-nowrap text-center" id="zip-cell-{{ item.contest.id }}">
                    {% if item.contest.zip_link %}
                        <div class="flex items-center justify-center space-x-2">
                            {% if item.zip_downloaded %}
                                <input type="checkbox"
                                       class="datafile-checkbox h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"
                                       data-id="{{ item.contest.id }}"
                                       data-type="zip"
                                       disabled
                                       checked
                                       title="Already downloaded">
                            {% else %}
                                <input type="checkbox"
                                       class="datafile-checkbox h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"
                                       data-id="{{ item.contest.id }}"
                                       data-type="zip"
                                       title="Mark data files for download">
                            {% endif %}
                        </div>
                    {% else %}
                        <span class="text-gray-800 dark:text-gray-200">N/A</span>
                    {% endif %}
                </td>
                
                <!-- Other Files -->
                <td class="px-3 py-4 whitespace-nowrap text-center" id="other-cell-{{ item.contest.id }}">
                    {% if item.contest.other_link %}
                        <div class="flex items-center justify-center space-x-2">
                            <a href="{{ item.contest.other_link }}"
                               target="_blank"
                               rel="noopener noreferrer"
                               class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"
                               title="Open in new tab">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                                </svg>
                            </a>
                        </div>
                    {% else %}
                        <span class="text-gray-800 dark:text-gray-200">N/A</span>
                    {% endif %}
                </td>
                
                <!-- Status -->
                <td class="px-3 py-4 whitespace-nowrap">
                    {% if item.status == 'downloaded' %}
                        <span class="status-badge status-downloaded">Downloaded</span>
                    {% elif item.status == 'partial' %}
                        <span class="status-badge status-partial">Partially Downloaded</span>
                    {% elif item.status == 'pending' %}
                        <span class="status-badge status-pending">Not Downloaded</span>
                    {% else %}
                        <span class="status-badge status-pending">No Files</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="8" class="px-6 py-4 text-center text-gray-500">
                    No contests found matching the current filters.
                </td>
            </tr>
        {% endif %}
    </tbody>
</table> 